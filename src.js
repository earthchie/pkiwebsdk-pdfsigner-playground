require("pkiwebsdk");

// Set your own CA store
const rootCA = `-----BEGIN CERTIFICATE-----
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
pMVPHlxSyhOMfGjhuZNFH6bxUHTE
-----END CERTIFICATE-----`;
const intermediateCA = `-----BEGIN CERTIFICATE-----
MIIGADCCA+igAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwgY8xCzAJBgNVBAYTAklE
MRAwDgYDVQQIDAdqYWthcnRhMRAwDgYDVQQHDAdqYWthcnRhMRAwDgYDVQQKDAdt
YXNjZW5nMRAwDgYDVQQLDAdtYXNjZW5nMRYwFAYDVQQDDA1tYWNzZW5nUm9vdENB
MSAwHgYJKoZIhvcNAQkBFhFyb290Y2FAbWFzY2VuZy5pZDAeFw0yMDA5MjIxNjA4
MzZaFw0zMDA5MjAxNjA4MzZaMIGNMQswCQYDVQQGEwJJRDEQMA4GA1UECAwHamFr
YXJ0YTEQMA4GA1UECgwHbWFzY2VuZzEQMA4GA1UECwwHbWFzY2VuZzEeMBwGA1UE
AwwVbWFzY2VuZ0ludGVybWVkaWF0ZUNBMSgwJgYJKoZIhvcNAQkBFhlpbnRlcm1l
ZGlhdGVjYUBtYXNjZW5nLmlkMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKC
AgEA4rndrK25eWx5TrT6Ixzxx71859/7gqDZRJknMPIGVfnQRqBH7BFytXa6LYYS
eiODGJ9VI+1aDPomgVRF1BIPZwW3U/wMcuPduvgFO8lxonMFFgYBtdYsvdY89eWB
wTphUZn8zUykI3D5mN2a2hQ8RDwNEE9UJQowshLU5e0q4YebQUk+H+qFoQpFz3tv
aLVNp9Knb48b5LAuy8R/QDnm4oUWqgjaRUBctwzJe0okX/6bS1aZ4/5UZk1NcTjg
EYtBHzyGiyqiqyCjn/kW70oSGntSc/IWw1H0eSigubeUf8+xvjsL4gQQqOCLYbHu
RBJBxzETghMprUHLKeEFafdMaChELsyR77k7XL5nTWynhYK8FTklC9RvKhx0IhAM
zyX8dZdcoCc73R8A8TFff8TEYA/hUN52m7p9D60DFvp0Mx2owtW908086fJ9a6a9
C2NQwyuJcWxCueyq5Ae+YwBN5e+IjzpEXg63lb/M5qimxSGilvmfqKGPm+znGkZv
cb1DAxWFPTNMVcd8pZg1T/Av/gzT0Ju5+KSW5MzfTKoIfpVbYLUmxttodeXtGzyi
7HgkeK9XoyJ2nc3dExwCOp1ssynGSnWzubHFRcAZIvL7EhzoxGxNMYxYfRZgU7jp
Zh1wRKBKsV2T7reaEFZZcjIKKjHTqj71Hry7YcEIfasmbx8CAwEAAaNmMGQwHQYD
VR0OBBYEFOELaZ4LP2F1rA9sJ1leGHzS6nVpMB8GA1UdIwQYMBaAFFaZ7hfQzC3E
0DFU/kq41OylQkqIMBIGA1UdEwEB/wQIMAYBAf8CAQAwDgYDVR0PAQH/BAQDAgGG
MA0GCSqGSIb3DQEBCwUAA4ICAQCvksXGV5U/OlH02NuSlhqm5jQHYcvfSJlGtl7P
di70Iiyu/AQ6AOyvCCkyr0t6MA+XLaBYnaVBVfAhXh50eERTJwZgSVQEzhC67UE9
546Gilag1t+n4HqV7lMimO0yb+Kyf5eUEhTkkpRHVZ+mSSh95Q5pp3glt6FZIRFI
jp1mJMcrsASTIQDk00eJ2iuKgwhYQBZR1b7/MJ8A5uUyyltkid6jcnzRVy6k6hea
V3VHUNrXZ9OhmIpEBU4bEhzSijzKcjqXtV/B5Ud+SpDmSb+to34rPnk1LHRLRXHZ
UpCkBdM6jJHGPrDJ5Oa0FBbjeVu45lfBmkcHvwyX7KN9PIyD60f/KWNuZ/TTXCt5
nCvmSCajnSt7ikP3BV2A863OUafuAei4Gk37jJEJnCythiZII3Zi4Wt222jFXMPc
PlhckR8V9BogmPagCccBsdQvc0kamOg6uA869duaLtM1yHfNuTDqMR4BsCNwz2Ru
DALfBXrAALtKLzW8hCoT4nyerLaVQQ4avvQ7wCLnKdF+QtjGgTdMihz97YSK5Re/
DH5NTplyOwgfiZW0URTV/gXVJVY5skb8AomSZ9ZdEAQewvxYILMZhZwzFFQHCXZ4
0tffjXgx0EymIVvfHPLX34z1kD6cBMfUqKyEBCJpYR/n2frWwRfxWiesAED7ge0A
IVohhQ==
-----END CERTIFICATE-----`;
window.PKIWebSDK.setCaStore([rootCA, intermediateCA]);

window.signPDF = function(passphrase, p12, data, cb) {
  const cert = new PKIWebSDK.Certificate();
  var certificate = null;
  var privateKey = null;
  cert
    .parseP12(p12, passphrase)
    .then(result => {
      certificate = result.certificate;
      return PKIWebSDK.Key.parsePEM(result.privateKey, "SHA-256");
    })
    .then(key => {
      privateKey = key;
      return certificate.getSubject();
    })
    .then(subject => {
      pdf = new PKIWebSDK.PDF(new Uint8Array(data));
      var info = {
        name: subject.commonName,
        reason: "",
        location: subject.stateOrProvinceName,
        contactInfo: subject.emailAddress
      };
      return pdf.sign(certificate, privateKey, info);
    })
    .then(result => {
      cb(null, result); //ab2Base64(result));
    })
    .catch(err => {
      cb(err.message);
    });
};

window.verifyPDF = function(data, cb) {
  let pdf = new PKIWebSDK.PDF(new Uint8Array(data));
  pdf
    .getSignatures()
    .then(result => {
      cb(result, result);
    })
    .catch(err => {
      cb(err.message);
    });
};

let budiP12 = window.PKIWebSDK.Utils.base642Ab(
  "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"
);

let asepP12 = window.PKIWebSDK.Utils.base642Ab("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")

let pdf = window.PKIWebSDK.Utils.base642Ab('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MDAwMzI1NiAwMDAwMCBuIAowMDAwMDAwMDIyIDAwMDAwIG4gCjAwMDAwMDAyNjAgMDAwMDAgbiAKMDAwMDAwMDM4OSAwMDAwMCBuIAowMDAwMDAzMjIxIDAwMDAwIG4gCjAwMDAwMDMzOTUgMDAwMDAgbiAKMDAwMDAwMDQ4NiAwMDAwMCBuIAowMDAwMDAzMjAwIDAwMDAwIG4gCjAwMDAwMDMzNDUgMDAwMDAgbiAKMDAwMDAwMzY1NiAwMDAwMCBuIAowMDAwMDAzOTIyIDAwMDAwIG4gCjAwMDAwMDU5MzQgMDAwMDAgbiAKMDAwMDAwNTk1NSAwMDAwMCBuIAowMDAwMDA1OTgxIDAwMDAwIG4gCjAwMDAwMDYwNTYgMDAwMDAgbiAKMDAwMDAwNjA4MCAwMDAwMCBuIAp0cmFpbGVyCjw8IC9TaXplIDE5IC9Sb290IDExIDAgUiAvSW5mbyAxIDAgUiAvSUQgWyA8NGQ3MWY5ZDZiZWZjMmEyNmQ1OTE4Njk3MzE1M2JlNWI+Cjw0ZDcxZjlkNmJlZmMyYTI2ZDU5MTg2OTczMTUzYmU1Yj4gXSA+PgpzdGFydHhyZWYKNjIyNwolJUVPRgo=')

window.signPDF("123456", budiP12, pdf, (err, signedPDF) => {
  console.log(err);

  window.verifyPDF(signedPDF, (err, verifyResult) => {
    console.log(err);
    console.log(verifyResult[0].signedData.getData().signerInfo[0].authenticatedAttributes.digest); // Digest
    console.log(verifyResult[0].signedData.getData().signerInfo[0].serialNumber); // To be check against CRL
    verifyResult[0].signedData.data.certificates[0].toPEM() // To be check against CA chain
    .then((result) => {
      console.log(result)
      let cert = new window.PKIWebSDK.Certificate()
      cert.parsePEM(result)
      .then((cert) => {
        return cert.validate()
      })
      .then((result) => {
        console.log("isValid: ", result.isValid)
        console.log("isTrusted: ", result.isTrusted)
        // Uncomment to download
        //window.toFile(signedPDF)
      })
    })
  });
});

window.toFile = (arrayBuffer, filename, type) => {
  var blob = new Blob([arrayBuffer], { type: type });
  if (typeof window.navigator.msSaveBlob !== "undefined") {
    window.navigator.msSaveBlob(blob, filename);
  } else {
    var URL = window.URL || window.webkitURL;
    var downloadUrl = URL.createObjectURL(blob);
    if (filename) {
      var a = document.createElement("a");
      if (typeof a.download === "undefined") {
        window.location = downloadUrl;
      } else {
        a.href = downloadUrl;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
      }
    } else {
      window.location = downloadUrl;
    }
    setTimeout(function() {
      URL.revokeObjectURL(downloadUrl);
    }, 100);
  }
};
